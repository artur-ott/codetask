<link rel="import" href="../polymer/polymer.html">
<link rel="import" href="../jquery-import/jquery-import.html">


  <style>
    .task-check-container {
      position: relative;
      width: 100%;
      height: 0px;
      right: 0;
      top: 0;
    }
    .task-check-square {
      position: absolute;
      width: 50px;
      height: 50px;
      right: 0;
      top: 0;
      color: white;
      background-color: #097C2C;
      text-align: center;
    }

    .task-check-right-triangle {
      position: absolute;
      right: 0;
      border-width: 0 25px 25px 0;
      border-color: transparent #097C2C transparent transparent;
    }

    .task-check-left-triangle {
      position: absolute;
      right: 25px;
      border-width: 25px 25px 0 0;
      border-color: #097C2C transparent transparent transparent;
    }

    .task-check-right-triangle, .task-check-left-triangle {
      top: 50px;
      padding: 0px;
      width: 0px;
      height: 0px;
      -webkit-transform:rotate(360deg);
      border-style: solid;
    }
  </style>
  <script>
    AbstractTask = {
      // constructor
      _super: function() {
        this.data = {};
        this.state = {};
        this.checked_ = false;
        this.dirty_ = false;
      },

      get state() { return this.state_; },
      set state(value) { this.state_ = value; },
      get data() { return this.data_; },
      set data(value) { this.data_ = value; },

      // data
      get description() { return this.data.description; },
      set description(value) { this.data.description = value; },
      
      // state
      get checked() { return this.checked_; },
      set checked(value) { this.checked_ = value; },
      get dirty() { return this.dirty_; },
      set dirty(value) { this.dirty_ = value; },

      addDescription: function() {
        var p = document.createElement('p');
        p.innerHTML = this.description;
        $(this).before(p);
      },
      addCheckFlag: function() {
        if (this.data.task_check) return;

        var r = $('<div>Done</div>').addClass('task-check-square');
        var tl = $('<div></div>').addClass('task-check-left-triangle');
        var tr = $('<div></div>').addClass('task-check-right-triangle');

        this.data.task_check = $('<div></div>')
          .addClass('task-check-container')
          .append(r, tl, tr)
          .insertBefore(this);
      },
      removeCheckFlag: function() {
        if (!this.data.task_check) return;
        this.data.task_check.remove();
        this.data.task_check = undefined;
        this.checked = false;
      },
    };
  </script>